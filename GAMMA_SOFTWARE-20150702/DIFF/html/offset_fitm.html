<!DOCTYPE doctype PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii">

  <title>DIFF Reference Manual: offset_fitm</title>
</head>

<body>
  <h1>Gamma DIFF: Reference Manual</h1>
  <hr>

  <h2>offset_fitm</h2><i>ANSI-C program: <a href=
  "../src/offset_fitm.c">offset_fitm.c</a></i>

  <p><i>offset_fitm</i> computes registration offset polynomials
  from offsets file generated by one of the programs <a href=
  "offset_pwrm.html">offset_pwrm,</a> or <a href=
  "offset_pwr_trackingm.html">offset_pwr_trackingm</a>.</p>

  <p><b>SYNOPSIS</b><br>
  <b><tt>offset_fitm &lt;offs&gt; &lt;snr&gt; &lt;DIFF_par&gt;
  [coffs] [coffsets] [thres] [npoly] [interact_flag]</tt></b><br>
  &nbsp;</p>

  <table border="1" cellpadding="7">
    <tbody>
      <tr>
        <td>&lt;offs&gt;</td>

        <td>(input) binary file with range and azimuth offset
        estimates (fcomplex)</td>
      </tr>

      <tr>
        <td>&lt;snr&gt;</td>

        <td>(input) binary file with SNR values of offset estimates
        (float)</td>
      </tr>

      <tr>
        <td>&lt;DIFF_par&gt;</td>

        <td>(input/output) DIFF/GEO parameter file for the
        scene</td>
      </tr>

      <tr>
        <td>[coffs]</td>

        <td>(output) culled range and azimuth offset estimates
        (fcomplex, enter - for none)</td>
      </tr>

      <tr>
        <td>[coffsets]</td>

        <td>(output) culled offset estimates and snr values (text
        file, enter - for none)</td>
      </tr>

      <tr>
        <td>[thres]</td>

        <td>SNR threshold (enter - for default from DIFF_par)</td>
      </tr>

      <tr>
        <td>[npoly]</td>

        <td>number of polynomial model parameters (enter - for
        default, 1, 3, 4, 6 default=4)</td>
      </tr>

      <tr>
        <td>[interact_flag]</td>

        <td>interactive culling (1=YES, 0=NO, default=NO )</td>
      </tr>
    </tbody>
  </table>

  <p><b>EXAMPLE</b><br>
  <tt>offset_fitm i1_i2.offs i1_i2.snr i1_i2.diff_par i1_i2.coffs
  i1_i2.coffsets 7.0 4</tt><br></p>

  <p>Determines range and azimuth offset polynomials using
  least-squares estimation.<br>
  <b><br>
  DESCRIPTION</b><br>
  <i>offset_fitm</i> computes range and azimuth registration offset
  polynomials from offsets estimated by one of the programs
  <a href="offset_pwrm.html">offset_pwrm,</a> or <a href=
  "offset_pwr_trackingm.html">offset_pwr_trackingm,</a>. The input
  range and azimuth offsets and the corresponding SNR estimates
  (used a measure for the quality of the individual estimates) are
  stored in binary files.</p>

  <p>This program generates polynomial models of range and azimuth
  offsets using linear least-squares estimation. It has the
  capability to determine if particular offset measurements are in
  error and removes these from the input data set based upon two
  criterea: SNR of the offset measurement, and deviation of the
  measurement with respect to the current model values. Offset
  estimates with an SNR below the indicated threshold are rejected
  for the final fit. For intensity offset measurement the nominal
  SNR value lies between 6.0 and 7.0. A second criterea for
  rejection of values is based upon the deviation of the offset
  measurement away from an initial fit of the data.</p>

  <p>This process can be repeated recursively using the current
  model fit to evaluate the remaining points. Tighter thresholds
  are applied at each stage of the interation. Termination occurs
  when there is no further improvement in the standard deviation of
  the offsets relative to the model and is a matter of
  judgement.</p>

  <p>Offset polynomial estimation can be done either automatically
  or interactively. The program queries the user in the interactive
  mode for the SNR and maximum range and azimuth errors. Offset
  data above the threshold (the culled data) are then used to
  determine a new global fit to the estimates. Typically, in the
  first round of culling, the points 3 or more standard deviations
  away from the global fit are rejected.</p>

  <p>The formats and definitions of the individual parameters in
  the are ISP offset/processing parameter file are found in the ISP
  and DIFF&amp;GEO type definition files <i>typedef_ISP.h,</i>
  <i>typedef_DIFF.h</i> and in the description of the DIFF/GEO
  parameter file and in the description of the <a href=
  "create_diff_par.html">create_diff_par</a>&nbsp; and <a href=
  "create_diff_par.html">create_diff_par</a>&nbsp; programs. The
  coordinates of the image section selected to be processed are
  relative to the image 1.</p>

  <p>4-parameter polynomials are used to model the range and
  azimuth offsets:<br>
  <tt><br>
  range_offset = A0 + A1*range + A2*azimuth + A3*range*azimuth +
  A4*range*range + A5*azimuth*azimuth</tt><br>
  <tt>azimuth_offset = B0 + B1*range + B2*azimuth +
  B3*range*azimuth + B4*range*range + B5*azimuth*azimuth</tt></p>

  <p>The resulting polynomials are written out to the DIFF offset
  parameter file.</p>

  <p>The polynomial order can be indicated on the command line.
  Valid orders are 1,3,4 or 6. The corresponding polynomials are
  (r: range pixel number, az: azimuth pixel number):<br>
  &nbsp;</p>

  <table border="1" cellpadding="7">
    <tbody>
      <tr>
        <td style="font-weight: bold;">Order</td>

        <td style="font-weight: bold;">Polynomial</td>
      </tr>

      <tr>
        <td style="text-align: center; font-weight: bold;">1</td>

        <td><tt>A0</tt></td>
      </tr>

      <tr>
        <td style="text-align: center; font-weight: bold;">3</td>

        <td><tt>A0 + A1*r + A2*az</tt></td>
      </tr>

      <tr>
        <td style="text-align: center; font-weight: bold;">4</td>

        <td><tt>A0 + A1*r + A2*az + A3*r*az</tt></td>
      </tr>

      <tr>
        <td style="text-align: center; font-weight: bold;">6</td>

        <td><tt>A0 + A1*r + A2*az + A3*r*az + A4*r*r +
        A5*az*az</tt></td>
      </tr>
    </tbody>
  </table><br>

  <p><b>OPTIONS</b><br>
  In the case of noisy data the least squares fit may not be very
  stable. In such a case the use of a 3 parameter polynomial may be
  preferred over the use of the 4 parameter polynomial. A possible
  approach in such a case is to first derived a 3 parameter
  polynomial and to reject estimates which are far away from this
  fit. Then in a second step the culled offsets (coffs) are used to
  derive the least-squares fit for the 4 parameter polynomial.</p>

  <p><b>SEE ALSO</b><br>
  <a href="init_offsetm.html">init_offsetm</a>, <a href=
  "offset_pwrm.html">offset_pwrm</a>, <a href=
  "offset_pwr_trackingm.html">offset_pwr_trackingm</a>, <a href=
  "typedef_ISP.h.html">typedef_ISP.h</a>, <a href=
  "typedef_DIFF.h.html">typedef_DIFF.h</a> .</p>
  <hr>
  <a href="copyright.html">&copy;</a> Copyrights for <a href=
  "DIFF_documentation.html">Documentation</a>, <a href=
  "DIFF_users_guide.html">Users Guide</a> and <a href=
  "DIFF_reference_manual.html">Reference Manual</a> by <a href=
  "gamma.html">Gamma Remote Sensing</a>, 2008.<br>
  <a href="urs_wegmuller.html">UW</a>, <a href=
  "charles_werner.html">CW</a>, last change 15-Feb-2008.
</body>
</html>
